# Инструмент BookTimes

Инструмент для поиска доступных временных слотов для записи на услугу через API Yclients.

## Описание

`BookTimes` позволяет найти свободные временные окна для записи на конкретную услугу в указанную дату. Инструмент может работать как с указанием конкретного мастера, так и без него (показывает слоты всех мастеров).

## Параметры

- `service_id` (int, обязательный) - ID услуги в системе Yclients
- `date` (str, обязательный) - Дата в формате YYYY-MM-DD (например, '2025-01-15')
- `master_name` (str, опциональный) - Имя мастера. Если указано, показываются слоты только у этого мастера

## Переменные окружения

### Локальная разработка (.env файл)

```env
AUTH_HEADER=Bearer YOUR_TOKEN_HERE
COMPANY_ID=YOUR_COMPANY_ID
```

### Облачное развертывание (Yandex Cloud)

```env
AuthenticationToken=Bearer YOUR_TOKEN_HERE
CompanyID=YOUR_COMPANY_ID
```

Инструмент автоматически определяет, какие переменные использовать:
- Сначала пытается использовать `AUTH_HEADER` и `COMPANY_ID` (для локальной разработки)
- Если их нет, использует `AuthenticationToken` и `CompanyID` (для облака)

## Примеры использования

### Без указания мастера (все мастера)

```python
BookTimes(
    service_id=18709550,
    date="2025-01-15"
)
```

### С указанием мастера

```python
BookTimes(
    service_id=18709550,
    date="2025-01-15",
    master_name="Анна"
)
```

## Возвращаемый формат

Инструмент возвращает отформатированный текст со списком доступных временных интервалов:

```
Доступные временные слоты для услуги 'МАНИКЮР + ПОКРЫТИЕ ЛАКОМ' на 2025-01-15:

  • 9:00-10:00
  • 10:30-11:30
  • 14:00-15:00
```

## Особенности

1. **Объединение последовательных слотов**: Если есть слоты 9:00, 9:30, 10:00, они объединяются в интервал 9:00-10:00
2. **Поиск мастера по вариациям имени**: Поддерживается поиск по полному имени и сокращениям (Анна/Аня, Екатерина/Катя и т.д.)
3. **Исключение "Лист ожидания"**: Автоматически исключаются мастера и услуги с названием "Лист ожидания"
4. **Параллельные запросы**: Слоты запрашиваются параллельно для всех мастеров для ускорения работы

## Зависимости

- `aiohttp` - для асинхронных HTTP-запросов к API Yclients
- `pydantic` - для валидации данных














